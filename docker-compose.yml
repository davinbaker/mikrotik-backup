services:
  mikrotik-backup:
    build: .
    container_name: mikrotik-backup
    restart: unless-stopped

    env_file:
      - stack.env

    volumes:
      # rclone config with OneDrive token
      - /opt/mikrotik-backup/config/rclone.conf:/config/rclone.conf:ro
      # SSH private key for MikroTik
      - /opt/mikrotik-backup/secrets/mikrotik_id_rsa:/secrets/mikrotik_id_rsa:ro

    # Optional: resource limits
    deploy:
      resources:
        limits:
          memory: 128m
